!function(t,n,i,e){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),u=t("<div/>",{id:"imagelightbox-caption",html:"&nbsp;"}),c=t("<a/>",{id:"imagelightbox-close"}),d=t("<a/>",{id:"imagelightbox-aux"}),f=t("<div/>",{id:"imagelightbox-overlay"}),g=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),s=t("<div/>",{id:"imagelightbox-nav"}),p=t("<div/>",{id:"imagelightbox-wrapper"}),h=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},v=h()!==!1,b=function(t,n,i){var e={},o=h();e[o+"transform"]="translateX("+n+")",e[o+"transition"]=o+"transform "+i+"s linear",t.css(e)},m="ontouchstart"in n,x=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,y=function(t){if(m)return!0;if(!x||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(e){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,buttonAux:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){a.arrows&&C(this),a.navigation&&q(this,a.selector),a.overlay&&k(),a.button&&T(),a.buttonAux&&w(),a.lockBody&&E(!0),a.caption&&p.append(u)},onEnd:function(){D=t([]),p.remove().find("*").remove(),a.lockBody&&E(!1)},onLoadStart:function(){a.activity&&r(),a.caption&&S()},onLoadEnd:function(){a.activity&&h(),a.arrows&&l.css("display","block"),a.navigation&&O(a.selector)},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){p.trigger("previous.ilb2");var t=D.index(L)-1;if(t<0){if(a.quitOnEnd===!0)return A(),!1;t=D.length-1}L=D.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){p.trigger("next.ilb2");var t=D.index(L)+1;if(t>=D.length){if(a.quitOnEnd===!0)return A(),!1;t=0}L=D.eq(t)}},e),r=function(){p.append(o)},h=function(){t("#imagelightbox-loading").remove()},E=function(n){n?t("body").css("overflow","hidden"):t("body").css("overflow","scroll")},k=function(){p.append(f)},T=function(){c.appendTo(p).on("click.ilb7",function(){return A(),!1})},w=function(){d.appendTo(p).on("click",function(n){t(n.target).trigger("aux.imagelightbox")})},S=function(){u.html("&nbsp;"),t(L).data("ilb2-caption")?u.html(t(L).data("ilb2-caption")):t(L).find("img").length>0&&u.html(t(L).find("img").attr("alt"))},q=function(){var n=D;if(n.length){for(var i=0;i<n.length;i++)s.append(g.clone());p.append(s),s.on("click.ilb7 touchend.ilb7",function(){return!1});var e=s.find("a");e.on("click.ilb7 touchend.ilb7",function(){var i=t(this);if(n.eq(i.index()).attr("href")!==t("#imagelightbox").attr("src")){var o=D.eq(i.index());if(o.length){var a=D.index(L);L=o,U(i.index()<a?"left":"right")}}return e.removeClass("active"),e.eq(i.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},O=function(){var t=s.find("a");t.removeClass("active"),t.eq(D.index(L)).addClass("active")},C=function(){p.append(l),l.on("click.ilb7 touchend.ilb7",function(n){return n.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?_():j(),!1})},I="",D=t([]),L=t(),M=t(),P=0,X=0,N=0,B=!1,K=function(){if(!M.length)return!0;var i=u.outerHeight(),e=.8*t(n).width(),o=(n.innerHeight?n.innerHeight:t(n).height())-i,a=.9*o,r=new Image;r.src=M.attr("src"),r.onload=function(){if(P=r.width,X=r.height,P>e||X>a){var i=P/X>e/a?P/e:X/a;P/=i,X/=i}M.css({width:P+"px",height:X+"px",top:(o-X)/2+"px",left:(t(n).width()-P)/2+"px"})}},U=function(n){if(B)return!1;if(n="undefined"!=typeof n&&("left"===n?1:-1),M.length){var i={opacity:0};v?b(M,100*n-N+"px",a.animationSpeed/1e3):i.left=parseInt(M.css("left"))+100*n+"px",M.animate(i,a.animationSpeed,function(){z()}),N=0}B=!0,a.onLoadStart!==!1&&a.onLoadStart(),setTimeout(function(){var i=L.attr("href");M=t('<img id="'+a.id+'" />').attr("src",i).on("load.ilb7",function(){var i={opacity:1};if(M.appendTo(p),K(),M.css("opacity",0),v)b(M,-100*n+"px",0),setTimeout(function(){b(M,"0px",a.animationSpeed/1e3)},50);else{var e=parseInt(M.css("left"));i.left=e+"px",M.css("left",e-100*n+"px")}if(M.animate(i,a.animationSpeed,function(){B=!1,a.onLoadEnd!==!1&&a.onLoadEnd()}),a.preloadNext){var o=D.eq(D.index(L)+1);o.length||(o=D.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){a.onLoadEnd!==!1&&a.onLoadEnd()});var e=0,o=0,r=0;M.on(x?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),a.quitOnImgClick)return A(),!1;if(y(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;P/2>n?_():j()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(y(t.originalEvent)&&!a.quitOnImgClick)||(v&&(r=parseInt(M.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(y(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,N=e-o,void(v?b(M,-N+"px",0):M.css("left",r-N+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(y(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(N)>50?N<0?_():j():v?b(M,"0px",a.animationSpeed/1e3):M.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},_=function(){a.previousTarget()!==!1&&U("left")},j=function(){a.nextTarget()!==!1&&U("right")},z=function(){return!!M.length&&(M.remove(),void(M=t()))},H=function(n){return!B&&(B=!1,a.onStart!==!1&&a.onStart(),t("body").append(p),p.trigger("start.ilb2"),L=n,void U())},A=function(){return p.trigger("quit.ilb2"),!!M.length&&void M.animate({opacity:0},a.animationSpeed,function(){z(),B=!1,a.onEnd!==!1&&a.onEnd()})},R=function(n){function i(){n.filter(function(){return t(this).data("imagelightbox")===I}).each(function(){D=D.add(t(this))})}n.on("click.ilb7",{set:I},function(n){n.preventDefault(),I=t(n.currentTarget).data("imagelightbox"),i(),H(t(this))})};return this.startImageLightbox=function(){this.length>0&&H(t(this[0]))},t(n).on("resize.ilb7",K),t(i).ready(function(){a.quitOnDocClick&&t(i).on(m?"touchend.ilb7":"click.ilb7",function(n){M.length&&!t(n.target).is(M)&&(n.preventDefault(),A())}),a.lockBody&&t(i).on("keydown.ilb7",function(t){return!M.length||([32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),a.enableKeyboard&&t(i).on("keyup.ilb7",function(t){return!M.length||(t.preventDefault(),27===t.keyCode&&a.quitOnEscKey===!0&&A(),void(37===t.keyCode?_():39===t.keyCode&&j()))})}),t(i).off("click",this.selector),R(t(this)),this.loadPreviousImage=function(){_()},this.loadNextImage=function(){j()},this.quitImageLightbox=function(){return A(),this},this.addToImageLightbox=function(t){R(t)},this}}(jQuery,window,document);