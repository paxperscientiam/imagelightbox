!function(t,i,n,e){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),c=a.add(r),l=t("<div/>",{id:"imagelightbox-caption",html:"&nbsp;"}),h=t("<a/>",{id:"imagelightbox-close"}),d=t("<div/>",{id:"imagelightbox-overlay"}),u=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),g=t("<div/>",{id:"imagelightbox-nav"}),s=t("<div/>",{id:"imagelightbox-wrapper"}),f=function(){var t=n.body||n.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},p=(f()!==!1,"ontouchstart"in i);i.navigator.pointerEnabled||i.navigator.msPointerEnabled;t.fn.imageLightbox=function(e){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),r=function(){a.arrows&&E(this),a.navigation&&O(this,a.selector),a.overlay&&y(),a.button&&k(),a.caption&&s.append(l)},f=function(){a.activity&&x(),a.caption&&q()},b=function(){a.activity&&w(),a.arrows&&c.css("display","block"),a.navigation&&C(a.selector)},m=function(){s.trigger("previous.ilb2");var t=T.index(D)-1;if(t<0){if(a.quitOnEnd===!0)return M(),!1;t=T.length-1}D=T.eq(t),P(-1)},v=function(){s.trigger("next.ilb2");var t=T.index(D)+1;if(t>=T.length){if(a.quitOnEnd===!0)return M(),!1;t=0}D=T.eq(t),P(1)},x=function(){s.append(o)},w=function(){t("#imagelightbox-loading").remove()},y=function(){s.append(d)},k=function(){h.appendTo(s).on("click.ilb7",function(){return M(),!1})},q=function(){l.html("&nbsp;"),t(D).data("ilb2-caption")?l.html(t(D).data("ilb2-caption")):t(D).find("img").length>0&&l.html(t(D).find("img").attr("alt"))},O=function(){var i=T;if(i.length){for(var n=0;n<i.length;n++)g.append(u.clone());s.append(g),g.on("click.ilb7 touchend.ilb7",function(){return!1});var e=g.find("a");e.on("click.ilb7 touchend.ilb7",function(){var n=t(this);if(i.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var o=T.eq(n.index());if(o.length){var a=T.index(D);D=o,P(n.index()<a?-1:1)}}return e.removeClass("active"),e.eq(n.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},C=function(){var t=g.find("a");t.removeClass("active"),t.eq(T.index(D)).addClass("active")},E=function(){s.append(c),c.on("click.ilb7 touchend.ilb7",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?m():v(),!1})},I="",T=t([]),D=t(),j=new Image,B=0,K=0,L=function(t){function i(t){var i,e,o,a=n.createElement("a"),r={};for(a.href=t,i=a.search.replace(/^\?/,"").split("&"),o=0;o<i.length;o++)e=i[o].split("="),r[e[0]]=e[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var e=a.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(e);if(!o)return!1;var r=t.attr("href"),c=i(r).pathname,l=new RegExp(e,"i"),h=l.test(c);return h},z=function(){var t=D.attr("href");return new Promise(function(i,n){j.id=a.id,j.src=t,j.onload=function(){i()},j.onerror=function(){n(j.src)}})},H=function(){var n=l.outerHeight(),e=.8*t(i).width(),o=(i.innerHeight?i.innerHeight:t(i).height())-n,a=.9*o,r=new Image,c={};if(r.src=j.src,B=r.width,K=r.height,B>e||K>a){var h=B/K>e/a?B/e:K/a;B/=h,K/=h}return c.width=B,c.height=K,c.top=(o-K)/2,c.left=(t(i).width()-B)/2,c},P=function(i){f(),S(),z().then(function(i){var n=H();t(j).css({width:n.width+"px",height:n.height+"px",top:n.top+"px",left:n.left+"px"}),t(j).css({opacity:0}).appendTo(s),t(j).animate({opacity:1},{duration:a.animationSpeed})},function(t){console.log("Image source "+t+" failed to load!")}).then(function(t){b()})},S=function(){t(j).remove()},N=function(i){r(),t("body").append(s),a.lockBody&&t("body").addClass("imagelightbox-scroll-lock"),s.trigger("start.ilb2"),D=i,P(0)},M=function(){a.lockBody&&t("body").removeClass("imagelightbox-scroll-lock"),t(j).animate({opacity:0},{duration:a.animationSpeed,complete:function(){t(j).remove(),T=t([]),s.trigger("quit.ilb2"),s.remove().find("*").remove()}})},Q=function(i){function n(){i.filter(function(){return t(this).data("imagelightbox")===I}).filter(function(){return L(t(this))}).each(function(){T=T.add(t(this))})}i.on("click.ilb7",{set:I},function(i){i.preventDefault(),I=t(i.currentTarget).data("imagelightbox"),n(),T.length<1?M():N(t(this))})};return t(i).on("resize.ilb7",function(){var i=H();t(j).css({width:i.width+"px",height:i.height+"px",top:i.top+"px",left:i.left+"px"})}),t(n).ready(function(){a.quitOnDocClick&&t(n).on(p?"touchend.ilb7":"click.ilb7",function(i){j.length&&!t(i.target).is(j)&&(i.preventDefault(),M())}),a.lockBody&&t(n).on("keydown.ilb7",function(t){return!j.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),a.enableKeyboard&&t(n).on("keyup.ilb7",function(t){return!j.length||(t.preventDefault(),[27].indexOf(t.which)>-1&&a.quitOnEscKey&&M(),void([37].indexOf(t.which)>-1?m():[39].indexOf(t.which)>-1&&v()))})}),t(n).off("click",this.selector),Q(t(this)),this.addToImageLightbox=function(t){Q(t)},this.loadPreviousImage=function(){m()},this.loadNextImage=function(){v()},this.quitImageLightbox=function(){return M(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);